2001-02-23  Jesper Skov  <jskov@redhat.com>

	* include/flash.h: HAL_FLASH_CACHES_WANT_OPTIMAL replaced with
	(opposite sense) HAL_FLASH_CACHES_OLD_MACROS.

	* src/flash.c (__anonymizer): Use to force the compiler to use
	jumps instead of branches.

2001-02-22  Jesper Skov  <jskov@redhat.com>

	* include/flash_dev.h: Added. Contains macros and definitions
	common to all (new style) flash device drivers.

	* include/flash.h: Added two new error codes.
	* cdl/io_flash.cdl: Added CYGHWR_IO_FLASH_DEVICE_IN_RAM.
	* src/flash.c: Made functions respect
	CYGHWR_IO_FLASH_DEVICE_IN_RAM and jump directly to the code
	instead of copying it around.
	(__arm_broken): Work around problem with ARM tools.

2001-02-06  Hugo Tyson  <hmt@redhat.com>

	* src/flash.c (flash_erase): Add an additional argument to the
	call into the driver, being the blocksize (as discovered).  This
	allows a gross check for actual erase in some drivers.  Those that
	don't use it, it's harmless - after all, this is an API by trust.

2000-12-06  Jesper Skov  <jskov@redhat.com>

	* src/flash.c (flash_dev_query): Added. Allows reloc/cache magic
	to be removed from device drivers (eventually). Also fixed some
	warnings, and made function references use char[] instead of just
	char to prevent MIPS compiler from messing up.

	* include/flash.h: Added FLASH_ERR_DRV_VERIFY and flash_dev_query.

2000-11-27  Jesper Skov  <jskov@redhat.com>

	* src/flash.c: Do all flash access inside properly
	cache-controlled region.
	* include/flash.h: Cache definitions.

2000-11-17  Jesper Skov  <jskov@redhat.com>

	* src/flash.c: Added debug mode, allowing device driver to use printf.

2000-11-16  Jesper Skov  <jskov@redhat.com>

	* src/flash.c: Added suspend error messages.
	* include/flash.h: Same.

2000-09-01  Hugo Tyson  <hmt@cygnus.co.uk>

	* include/flash.h: 
	* src/flash.c: CYGHWR_IO_FLASH_BLOCK_LOCKING is an interface, so
	it's always defined; look for > 0 instead.

2000-08-28  Gary Thomas  <gthomas@redhat.com>

	* src/flash.c: 
	* include/flash.h: 
	* cdl/io_flash.cdl: Support block locking (optional by hardware).

2000-08-22  Hugo Tyson  <hmt@cygnus.co.uk>

	* src/flash.c (flash_program): Add HAL_ICACHE_DISABLE/ENABLE pairs
	around calls to RAM copy of programming/erasing function - this is
	necessary to get reliable operation on EBSA285 and similar.
	Otherwise, what is in the instruction cache might be run instead.

2000-08-14  Gary Thomas  <gthomas@redhat.com>

	* include/flash.h: Add block size mask for finding block boundaries.

	* src/flash.c: Use block size properly.

2000-07-29  Gary Thomas  <gthomas@redhat.com>

	* include/flash.h: 
	* src/flash.c (flash_get_block_info): New function.
	(flash_program): Program in block_size chunks as much as possible.

//===========================================================================
//####COPYRIGHTBEGIN####
//                                                                          
// -------------------------------------------                              
// The contents of this file are subject to the Red Hat eCos Public License 
// Version 1.1 (the "License"); you may not use this file except in         
// compliance with the License.  You may obtain a copy of the License at    
// http://www.redhat.com/                                                   
//                                                                          
// Software distributed under the License is distributed on an "AS IS"      
// basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See the 
// License for the specific language governing rights and limitations under 
// the License.                                                             
//                                                                          
// The Original Code is eCos - Embedded Configurable Operating System,      
// released September 30, 1998.                                             
//                                                                          
// The Initial Developer of the Original Code is Red Hat.                   
// Portions created by Red Hat are                                          
// Copyright (C) 1998, 1999, 2000 Red Hat, Inc.                             
// All Rights Reserved.                                                     
// -------------------------------------------                              
//                                                                          
//####COPYRIGHTEND####
//===========================================================================
